---
layout: default
title: 点我自测
---

<div class="text-center">
    <h2>体质自测</h2>
    <p class="lead">扫描下方二维码开始体质评估</p>
    <div id="qrcode-container">
        <img src="/img/tencent-qr.jpg" alt="问卷二维码" class="img-fluid">
    </div>
    <div class="mt-4">
        <div id="result-container" style="display: none;">
            <h3>体质分析结果</h3>
            <div id="analysis-result" class="mt-3"></div>
            <div id="recommendation" class="mt-3"></div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // 监听来自问卷系统的消息
    window.addEventListener('message', function(event) {
        // 验证消息来源
        if (event.origin !== 'https://ghj324.github.io') return;
        
        if (event.data.type === 'survey_submission') {
            analyzeResults(event.data.answers);
        }
    });
});

function analyzeResults(answers) {
    const keywords = {
        '阳虚': ['怕冷', '手脚冰凉', '精神疲惫'],
        '阴虚': ['失眠', '头疼', '衰老'],
        '气虚': ['气血不足', '贫血', '疲劳'],
        '痰湿': ['肥胖', '湿气重', '消化不良'],
        '气郁': ['抑郁', '情绪低落', '胸闷']
    };

    let results = {};
    let recommendations = {
        '阳虚': ['生姜红糖茶', '桂圆红枣茶'],
        '阴虚': ['菊花枸杞茶', '石斛养生茶'],
        '气虚': ['人参养生茶', '黄芪当归茶'],
        '痰湿': ['荷叶山楂茶', '陈皮普洱茶'],
        '气郁': ['玫瑰花茶', '柑橘茯苓茶']
    };

    // 分析答案并显示结果
    const resultContainer = document.getElementById('result-container');
    const analysisResult = document.getElementById('analysis-result');
    const recommendationDiv = document.getElementById('recommendation');
    
    // 显示分析结果
    resultContainer.style.display = 'block';
}
</script>
